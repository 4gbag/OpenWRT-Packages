{"version":3,"sources":["webpack:///src/components/AppManagerApp.vue","webpack:///./src/components/AppManagerApp.vue?5ca8","webpack:///./src/components/AppManagerApp.vue"],"names":["AppManagerApp","i","app","installed","_this","this","pid","_iteratorNormalCompletion","pkg","_step","value","mergedAppList","_this2","_iteratorNormalCompletion2","_step2","id","_this3","_this4","getApps","getInstalledApps","components_AppManagerApp","render","_vm","_h","$createElement","_c","_self","staticClass","_l","tab","tabId","key","class","active","currentTab","badge","attrs","data-badge","on","click","$event","_v","_s","name","src","loading","isLoading","idx","directives","rawName","appShow","expression","onerror","alt","description","version","installing","disabled","isInstalling","removeApp","_e","installApp","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/0.9a1c9eadb9e969f99e85.js","sourcesContent":["<template>\n  <div class=\"container app-view\">\n\n    <ul class=\"tab tab-block\">\n      <li v-for=\"(tab, tabId) in tabs\" class=\"tab-item\" :key=\"tabId\">\n        <a class=\"c-hand\"\n          :class=\"{active: tabId === currentTab, badge: tab.badge}\"\n          @click=\"currentTab = tabId\"\n          :data-badge=\"tab.badge\"\n        >{{tab.name}}</a>\n      </li>\n    </ul>\n\n    <div class=\"app-body\">\n\n      <ul class=\"menu app-menu\">\n        <li class=\"menu-item\">\n          <div class=\"tile tile-centered\">\n            <div class=\"tile-icon\" @click=\"getApps\"><img class=\"avatar\" src=\"static/img/icons/store.svg\"></div>\n            <div class=\"tile-content\">App Manager</div>\n          </div>\n        </li>\n        <li class=\"divider\"> </li>\n        <li v-for=\"(tab, tabId) in tabs\" class=\"menu-item\" :key=\"tabId\">\n          <a class=\"c-hand\"\n            :class=\"{active: tabId === currentTab, badge: tab.badge}\"\n            @click=\"currentTab = tabId\"\n            :data-badge=\"tab.badge\">\n            {{tab.name}}\n          </a>\n        </li>\n      </ul>\n\n      <div class=\"app-content\">\n        <!-- App List -->\n        <div class=\"card app-list\">\n          <div class=\"card-header\">\n\n            <!-- <div class=\"has-icon-right float-right\" >\n              <input type=\"text\" class=\"form-input\" placeholder=\"Search\" v-model=\"appFilter\">\n              <i class=\"form-icon icon icon-cross  c-hand\" v-if=\"appFilter !== ''\" @click=\"appFilter = ''\" ></i>\n              <i class=\"form-icon icon icon-search\" v-if=\"appFilter === ''\" ></i>\n            </div> -->\n\n            <span class=\"loading-lg loading-icon float-right\" :class=\"{loading: isLoading}\"></span>\n            <span class=\"card-title h5\">Onion OS Apps </span>\n\n          </div>\n\n          <div class=\"card-body app-list-body\">\n            <div class=\"card app-item\" v-for=\"(app, idx) in availableApps\" :key=\"app.id\" v-show=\"appShow(app)\">\n              <div class=\"card-body\">\n                <img :src=\"`http://repo.onioniot.com/onionos/apps/icons/${app.id}.svg`\" onerror=\"this.src = 'static/img/icons/onion.svg'\" alt=\"\" class=\"app-icon\">\n\n                <div class=\"app-discription\">\n                  {{app.description}} ({{app.version}})\n                </div>\n              </div>\n              <div class=\"card-footer\">\n\n                <!-- <button class=\"btn btn-primary float-right\" v-if=\"app.installed\" @click=\"openApp(app)\">Open</button> -->\n                <button class=\"btn btn-error float-right\" v-if=\"app.installed\"\n                @click=\"removeApp(app, idx)\"\n                :class=\"{loading: app.installing, disabled: isInstalling}\">Remove</button>\n\n                <button class=\"btn btn-success float-right\" v-if=\"!app.installed\"\n                @click=\"installApp(app, idx)\"\n                :class=\"{loading: app.installing, disabled: isInstalling}\">Install</button>\n\n              </div>\n            </div>\n          </div>\n        </div>\n\n      </div>\n    </div>\n  </div>\n\n</template>\n\n<script>\nexport default {\n  name: 'AppManagerApp',\n  data () {\n    return {\n      currentTab: 'available',\n      tabs: {\n        available: {name: 'Available'},\n        installed: {name: 'Installed'}\n      },\n      isLoading: true,\n      isInstalling: false,\n      installedApps: [],\n      availableApps: [],\n      appFilter: ''\n    }\n  },\n  methods: {\n    mergedAppList: function () {\n      for (var i = 0; i < this.availableApps.length; i++) {\n        var app = this.availableApps[i]\n        if (this.installedApps.indexOf(app.id) > -1) {\n          app.installed = true\n          this.$set(this.availableApps, i, app)\n        }\n      }\n    },\n    appShow: function (app) {\n      if (this.currentTab === 'installed') {\n        return app.installed\n      } else {\n        return true\n      }\n    },\n    getApps: function () {\n      this.isLoading = true\n      this.$store.dispatch('handleScript', {code: 'if [ ! -f /tmp/oos-app-list ]; then sleep 1; opkg update; opkg find \"oos-app*\" > /tmp/oos-app-list; fi'}).then(resp => {\n        return this.$store.dispatch('waitProcess', {pid: resp.pid})\n      }).then(() => {\n        return this.$store.dispatch('readFile', {path: '/tmp/oos-app-list'})\n      }).then(resp => {\n        this.availableApps = []\n        for (var pkg of resp.data.split('\\n')) {\n          if (pkg.length < 2) continue\n          var pkgData = pkg.split(' - ')\n          this.availableApps.push({\n            id: pkgData[0],\n            version: pkgData[1],\n            description: pkgData[2]\n          })\n        }\n        this.mergedAppList()\n        this.isLoading = false\n      })\n    },\n    getInstalledApps: function () {\n      this.$store.dispatch('handleCommand', {cmd: 'opkg', params: ['list-installed']}).then(resp => {\n        this.installedApps = []\n        for (var pkg of resp.stdout.split('\\n')) {\n          if (pkg.indexOf('oos-app') > -1) {\n            var pkgData = pkg.split(' - ')\n            this.installedApps.push(pkgData[0])\n          }\n        }\n        this.mergedAppList()\n      })\n    },\n    openApp: function (app) {\n      this.$store.dispatch('launchApp', {appId: app.id})\n    },\n    installApp: function (app, idx) {\n      this.isInstalling = true\n      app.installing = true\n      this.$set(this.availableApps, idx, app)\n\n      this.$store.dispatch('handleScript', {code: `opkg install ${app.id}`}).then(resp => {\n        return this.$store.dispatch('waitProcess', {pid: resp.pid})\n      }).then(() => {\n        app.installing = false\n        app.installed = true\n        this.isInstalling = false\n        this.$set(this.availableApps, idx, app)\n        this.$store.dispatch('refreshAppList')\n      })\n    },\n    removeApp: function (app, idx) {\n      this.isInstalling = true\n      app.installing = true\n      this.$set(this.availableApps, idx, app)\n\n      this.$store.dispatch('handleScript', {code: `opkg remove ${app.id}`}).then(resp => {\n        return this.$store.dispatch('waitProcess', {pid: resp.pid})\n      }).then(() => {\n        app.installing = false\n        app.installed = false\n        this.isInstalling = false\n        this.$set(this.availableApps, idx, app)\n        this.$store.dispatch('refreshAppList')\n      })\n    }\n  },\n  created: function () {\n    this.getApps()\n    this.getInstalledApps()\n  }\n}\n</script>\n\n<style scoped>\n.btn {\n    margin-left: 10px;\n}\n.avatar {\n  background: inherit;\n}\n\n.app-content {\n  max-width: 800px;\n  width: 100%;\n}\n\n.app-list {\n  text-align: left;\n  width: 100vw;\n  max-width: 800px;\n  margin: auto;\n  /* margin-top: 20px; */\n}\n.app-view {\n  padding: 20px;\n  background-color: #f8f9fa;\n  height: 100%;\n  overflow: auto;\n}\n.app-menu {\n  /* margin: 16px; */\n  margin-right: 40px;\n  z-index: 10;\n}\n.app-body {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n}\n\n.app-list-body {\n  display: flex;\n  /* flex-direction: */\n  flex-wrap: wrap;\n  align-content: space-evenly;\n  justify-content: space-between;\n}\n\n.app-item {\n  width: 100%;\n  max-width: 360px;\n  margin: 5px;\n}\n\n.tab {\n  display: none;\n}\n\n.loading-icon {\n  margin-right: 30px;\n}\n\n.card-body {\n  display: flex;\n  align-items: center;\n}\n\n.app-icon {\n  width: 80px;\n  margin-right: 10px;\n}\n\n@media only screen and (max-width: 1050px)  {\n  .tab {\n    display: flex;\n  }\n  .app-menu {\n    display: none;\n  }\n  .app-view {\n    padding: 0;\n  }\n}\n\n@media only screen and (max-width: 774px)  {\n  .app-list-body {\n    justify-content: center;\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/AppManagerApp.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container app-view\"},[_c('ul',{staticClass:\"tab tab-block\"},_vm._l((_vm.tabs),function(tab,tabId){return _c('li',{key:tabId,staticClass:\"tab-item\"},[_c('a',{staticClass:\"c-hand\",class:{active: tabId === _vm.currentTab, badge: tab.badge},attrs:{\"data-badge\":tab.badge},on:{\"click\":function($event){_vm.currentTab = tabId}}},[_vm._v(_vm._s(tab.name))])])})),_vm._v(\" \"),_c('div',{staticClass:\"app-body\"},[_c('ul',{staticClass:\"menu app-menu\"},[_c('li',{staticClass:\"menu-item\"},[_c('div',{staticClass:\"tile tile-centered\"},[_c('div',{staticClass:\"tile-icon\",on:{\"click\":_vm.getApps}},[_c('img',{staticClass:\"avatar\",attrs:{\"src\":\"static/img/icons/store.svg\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"tile-content\"},[_vm._v(\"App Manager\")])])]),_vm._v(\" \"),_c('li',{staticClass:\"divider\"}),_vm._v(\" \"),_vm._l((_vm.tabs),function(tab,tabId){return _c('li',{key:tabId,staticClass:\"menu-item\"},[_c('a',{staticClass:\"c-hand\",class:{active: tabId === _vm.currentTab, badge: tab.badge},attrs:{\"data-badge\":tab.badge},on:{\"click\":function($event){_vm.currentTab = tabId}}},[_vm._v(\"\\n          \"+_vm._s(tab.name)+\"\\n        \")])])})],2),_vm._v(\" \"),_c('div',{staticClass:\"app-content\"},[_c('div',{staticClass:\"card app-list\"},[_c('div',{staticClass:\"card-header\"},[_c('span',{staticClass:\"loading-lg loading-icon float-right\",class:{loading: _vm.isLoading}}),_vm._v(\" \"),_c('span',{staticClass:\"card-title h5\"},[_vm._v(\"Onion OS Apps \")])]),_vm._v(\" \"),_c('div',{staticClass:\"card-body app-list-body\"},_vm._l((_vm.availableApps),function(app,idx){return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.appShow(app)),expression:\"appShow(app)\"}],key:app.id,staticClass:\"card app-item\"},[_c('div',{staticClass:\"card-body\"},[_c('img',{staticClass:\"app-icon\",attrs:{\"src\":(\"http://repo.onioniot.com/onionos/apps/icons/\" + (app.id) + \".svg\"),\"onerror\":\"this.src = 'static/img/icons/onion.svg'\",\"alt\":\"\"}}),_vm._v(\" \"),_c('div',{staticClass:\"app-discription\"},[_vm._v(\"\\n                \"+_vm._s(app.description)+\" (\"+_vm._s(app.version)+\")\\n              \")])]),_vm._v(\" \"),_c('div',{staticClass:\"card-footer\"},[(app.installed)?_c('button',{staticClass:\"btn btn-error float-right\",class:{loading: app.installing, disabled: _vm.isInstalling},on:{\"click\":function($event){_vm.removeApp(app, idx)}}},[_vm._v(\"Remove\")]):_vm._e(),_vm._v(\" \"),(!app.installed)?_c('button',{staticClass:\"btn btn-success float-right\",class:{loading: app.installing, disabled: _vm.isInstalling},on:{\"click\":function($event){_vm.installApp(app, idx)}}},[_vm._v(\"Install\")]):_vm._e()])])}))])])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-7edf3305\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/AppManagerApp.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7edf3305\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./AppManagerApp.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./AppManagerApp.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./AppManagerApp.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7edf3305\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./AppManagerApp.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7edf3305\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/AppManagerApp.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}