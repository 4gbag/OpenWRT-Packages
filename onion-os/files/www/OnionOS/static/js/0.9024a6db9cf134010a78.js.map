{"version":3,"sources":["webpack:///src/components/AppManagerApp.vue","webpack:///./src/components/AppManagerApp.vue?696e","webpack:///./src/components/AppManagerApp.vue"],"names":["AppManagerApp","name","data","currentTab","tabs","available","installed","isLoading","isInstalling","isOOSUpdating","installedApps","availableApps","onionOs","id","showModal","appFilter","methods","mergedAppList","j","this","length","installedApp","i","app","installedVersion","version","$set","appShow","displayAppVersion","getApps","promise_default","a","resolve","reject","_this","$store","dispatch","url","then","resp","packages","match","descriptions","versions","pkg","split","desc","push","slice","description","bind","getInstalledApps","_this2","cmd","params","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","stdout","next","done","value","indexOf","pkgData","err","return","openApp","appId","opkgOperation","opkgCmd","_this3","code","pid","installApp","idx","_this4","installing","removeApp","_this5","updateApp","_this6","updateOnionOs","_this7","setTimeout","location","reload","created","_this8","p1","p2","all","components_AppManagerApp","render","_vm","_h","$createElement","_c","_self","staticClass","class","active","_v","_m","_l","tab","tabId","key","badge","attrs","data-badge","on","click","$event","_s","src","directives","rawName","expression","loading","disabled","onerror","alt","_e","staticRenderFns","staticStyle","padding","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/0.9024a6db9cf134010a78.js","sourcesContent":["<template>\n  <div class=\"container app-view\">\n\n    <div class=\"modal\" :class=\"{active: onionOs.showModal}\">\n      <a class=\"modal-overlay\"></a>\n      <div class=\"modal-container\">\n        <div class=\"modal-header\">\n          <div class=\"modal-title h5\">Update Complete</div>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"content label\" style=\"padding: 10px\">\n            Your browser will refresh in a few seconds\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <ul class=\"tab tab-block\">\n      <li v-for=\"(tab, tabId) in tabs\" class=\"tab-item\" :key=\"tabId\">\n        <a class=\"c-hand\"\n          :class=\"{active: tabId === currentTab, badge: tab.badge}\"\n          @click=\"currentTab = tabId\"\n          :data-badge=\"tab.badge\"\n        >{{tab.name}}</a>\n      </li>\n    </ul>\n\n    <div class=\"app-body\">\n\n      <ul class=\"menu app-menu\">\n        <li class=\"menu-item\">\n          <div class=\"tile tile-centered\">\n            <div class=\"tile-icon\" @click=\"getApps\"><img class=\"avatar\" src=\"static/img/icons/store.svg\"></div>\n            <div class=\"tile-content\">App Manager</div>\n          </div>\n        </li>\n        <li class=\"divider\"> </li>\n        <li v-for=\"(tab, tabId) in tabs\" class=\"menu-item\" :key=\"tabId\">\n          <a class=\"c-hand\"\n            :class=\"{active: tabId === currentTab, badge: tab.badge}\"\n            @click=\"currentTab = tabId\"\n            :data-badge=\"tab.badge\">\n            {{tab.name}}\n          </a>\n        </li>\n      </ul>\n\n      <div class=\"app-content\">\n        <!-- App List -->\n        <div class=\"card app-list\">\n          <div class=\"card-header\">\n\n            <!-- <div class=\"has-icon-right float-right\" >\n              <input type=\"text\" class=\"form-input\" placeholder=\"Search\" v-model=\"appFilter\">\n              <i class=\"form-icon icon icon-cross  c-hand\" v-if=\"appFilter !== ''\" @click=\"appFilter = ''\" ></i>\n              <i class=\"form-icon icon icon-search\" v-if=\"appFilter === ''\" ></i>\n            </div> -->\n\n            <span class=\"card-title h5\">Onion OS Apps </span>\n            <div class=\"oos-upgrade-message float-right\" v-show=\"!isLoading && onionOs.installed !== onionOs.available\">\n              A new version of OnionOS is available\n              <button class=\"btn btn-success float-right\"\n              @click=\"updateOnionOs()\"\n              :class=\"{loading: isOOSUpdating, disabled: isInstalling}\">Update Now</button>\n            </div>\n\n            <span class=\"loading-lg loading-icon float-right\" :class=\"{loading: isLoading}\"></span>\n\n          </div>\n\n          <div class=\"card-body app-list-body\" v-show=\"!isLoading\">\n            <div class=\"card app-item\" v-for=\"(app, idx) in availableApps\" :key=\"app.id\" v-show=\"appShow(app)\">\n              <div class=\"card-body\">\n                <img :src=\"`http://repo.onioniot.com/onionos/apps/icons/${app.id}.svg`\" onerror=\"this.src = 'static/img/icons/onion.svg'\" alt=\"\" class=\"app-icon\">\n\n                <div class=\"app-description\">\n                  <strong>{{app.name}}</strong>\n                  <br>\n                  {{app.description}}<br>\n                  <i class=\"app-version\">Version {{displayAppVersion(app)}}</i>\n                </div>\n              </div>\n              <div class=\"card-footer\">\n                <!-- <button class=\"btn btn-primary float-right\" v-if=\"app.installed\" @click=\"openApp(app)\">Open</button> -->\n                <button class=\"btn btn-error float-right\" v-if=\"app.installed\"\n                @click=\"removeApp(app, idx)\"\n                :class=\"{loading: app.installing, disabled: isInstalling}\">Remove</button>\n\n                <button class=\"btn float-right\" v-show=\"app.installed && (app.version !== app.installedVersion)\"\n                @click=\"updateApp(app, idx)\"\n                :class=\"{loading: app.installing, disabled: isInstalling}\">Update</button>\n\n                <button class=\"btn btn-success float-right\" v-if=\"!app.installed\"\n                @click=\"installApp(app, idx)\"\n                :class=\"{loading: app.installing, disabled: isInstalling}\">Install</button>\n\n              </div>\n            </div>\n          </div>\n        </div>\n\n      </div>\n    </div>\n  </div>\n\n</template>\n\n<script>\nexport default {\n  name: 'AppManagerApp',\n  data () {\n    return {\n      currentTab: 'available',\n      tabs: {\n        available: {name: 'Available'},\n        installed: {name: 'Installed'}\n      },\n      isLoading: true,\n      isInstalling: false,\n      isOOSUpdating: false,\n      installedApps: [],\n      availableApps: [],\n      onionOs: {\n        id: 'onion-os',\n        available: '',\n        installed: '',\n        showModal: false\n      },\n      appFilter: ''\n    }\n  },\n  methods: {\n    mergedAppList: function () {\n      for (var j = 0; j < this.installedApps.length; j++) {\n        var installedApp = this.installedApps[j]\n        for (var i = 0; i < this.availableApps.length; i++) {\n          var app = this.availableApps[i]\n          if (installedApp.id === app.id) {\n            app.installed = true\n            app.installedVersion = installedApp.version\n            this.$set(this.availableApps, i, app)\n          }\n        }\n      }\n    },\n    appShow: function (app) {\n      if (this.currentTab === 'installed') {\n        return app.installed\n      } else {\n        return true\n      }\n    },\n    displayAppVersion: function (app) {\n      if (this.currentTab === 'installed') {\n        return app.installedVersion\n      } else {\n        return app.version\n      }\n    },\n    getApps: function () {\n      return new Promise(function (resolve, reject) {\n        this.isLoading = true\n        this.availableApps = []\n        // get the available Package list from the Onion repo\n        this.$store.dispatch('httpGetRequest', {\n          url: 'http://repo.onion.io.s3.amazonaws.com/omega2/packages/onion/Packages'\n        })\n          .then(resp => {\n            // parse the data\n            var packages = resp.data.match(/^Package: (\\S+)/gm)\n            var descriptions = resp.data.match(/^Description: (.+)/gm)\n            var versions = resp.data.match(/^Version: (.+)/gm)\n            for (var i = 0; i < packages.length; i++) {\n              var pkg = packages[i].split(': ')\n              if (pkg[1] && pkg[1].match(/^oos-/)) {\n                // descriptions array holds\n                //  \"Description: <App Name> : <App Description>\"\n                var desc = descriptions[i].split(': ')\n\n                this.availableApps.push({\n                  id: pkg[1],\n                  version: versions[i].split(': ')[1],\n                  name: desc[1].slice(1, -1),\n                  description: desc[2]\n                })\n              } else if (pkg[1] && pkg[1] === this.onionOs.id) {\n                // check the available version of OnionOS\n                this.onionOs.available = versions[i].split(': ')[1]\n              }\n            }\n            this.mergedAppList()\n\n            resolve()\n          })\n      }.bind(this))\n    },\n    getInstalledApps: function () {\n      return new Promise(function (resolve, reject) {\n        this.$store.dispatch('handleCommand', {cmd: 'opkg', params: ['list-installed']}).then(resp => {\n          this.installedApps = []\n          for (var pkg of resp.stdout.split('\\n')) {\n            if (pkg.indexOf('oos-app') > -1) {\n              var pkgData = pkg.split(' - ')\n              this.installedApps.push({\n                id: pkgData[0],\n                version: pkgData[1]\n              })\n            } else if (pkg.match(/^onion-os /)) {\n              // find the installed version of OnionOS\n              var data = pkg.split(' - ')\n              this.onionOs.installed = data[1]\n              // TEMP: hardcoded to make OnionOS always update\n              // TODO: have a global debug mode switch\n              // this.onionOs.installed = '0.0.1'\n            }\n          }\n          this.mergedAppList()\n          resolve()\n        })\n      }.bind(this))\n    },\n    openApp: function (app) {\n      this.$store.dispatch('launchApp', {appId: app.id})\n    },\n    opkgOperation: function (opkgCmd) {\n      return new Promise(function (resolve, reject) {\n        this.isInstalling = true\n\n        this.$store.dispatch('handleScript', {code: opkgCmd}).then(resp => {\n          return this.$store.dispatch('waitProcess', {pid: resp.pid})\n        }).then(() => {\n          this.isInstalling = false\n          this.$store.dispatch('refreshAppList')\n          resolve()\n        })\n      }.bind(this))\n    },\n    installApp: function (app, idx) {\n      // TODO: convert this to use opkgOperation function instead\n      this.isInstalling = true\n      app.installing = true\n      this.$set(this.availableApps, idx, app)\n\n      this.$store.dispatch('handleScript', {code: `opkg update; opkg install ${app.id}`}).then(resp => {\n        return this.$store.dispatch('waitProcess', {pid: resp.pid})\n      }).then(() => {\n        app.installing = false\n        app.installed = true // TODO: notice: not included in opkgOperation function\n        app.installedVersion = app.version\n        this.isInstalling = false\n        this.$set(this.availableApps, idx, app) // TODO: notice: not included in opkgOperation function\n        this.$store.dispatch('refreshAppList')\n      })\n    },\n    removeApp: function (app, idx) {\n      // TODO: convert this to use opkgOperation function instead\n      this.isInstalling = true\n      app.installing = true\n      this.$set(this.availableApps, idx, app)\n\n      this.$store.dispatch('handleScript', {code: `opkg remove ${app.id}`}).then(resp => {\n        return this.$store.dispatch('waitProcess', {pid: resp.pid})\n      }).then(() => {\n        app.installing = false\n        app.installed = false // TODO: notice: not included in opkgOperation function\n        app.installedVersion = null // TODO: notice: not included in opkgOperation function\n        this.isInstalling = false\n        this.$set(this.availableApps, idx, app) // TODO: notice: not included in opkgOperation function\n        this.$store.dispatch('refreshAppList')\n      })\n    },\n    updateApp: function (app, idx) {\n      app.installedVersion = app.version\n      app.installing = true\n      this.$set(this.availableApps, idx, app)\n\n      this.opkgOperation(`opkg update; opkg upgrade ${app.id}`)\n        .then(() => {\n          app.installing = false\n          app.installed = true\n          this.$set(this.availableApps, idx, app)\n        })\n    },\n    updateOnionOs: function () {\n      this.isOOSUpdating = true\n      this.opkgOperation(`opkg update; opkg upgrade ${this.onionOs.id}`)\n        .then(() => {\n          this.isOOSUpdating = false\n          this.onionOs.showModal = true\n          setTimeout(function () {\n            location.reload()\n          }, 3000)\n        })\n    }\n  },\n  created: function () {\n    var p1 = this.getApps()\n    var p2 = this.getInstalledApps()\n\n    Promise.all([p1, p2])\n      .then(() => {\n        this.isLoading = false\n      })\n  }\n}\n</script>\n\n<style scoped>\n.app-version {\n  color: #7f8c8d;\n}\n\n.btn {\n    margin-left: 10px;\n}\n.avatar {\n  background: inherit;\n}\n\n.app-content {\n  max-width: 800px;\n  width: 100%;\n}\n\n.app-list {\n  text-align: left;\n  width: 100vw;\n  max-width: 800px;\n  margin: auto;\n  /* margin-top: 20px; */\n}\n.app-view {\n  padding: 20px;\n  background-color: #f8f9fa;\n  height: 100%;\n  overflow: auto;\n}\n.app-menu {\n  /* margin: 16px; */\n  margin-right: 40px;\n  z-index: 10;\n}\n.app-body {\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n}\n\n.app-list-body {\n  display: flex;\n  /* flex-direction: */\n  flex-wrap: wrap;\n  align-content: space-evenly;\n  justify-content: space-between;\n}\n\n.app-item {\n  width: 100%;\n  max-width: 360px;\n  margin: 5px;\n}\n\n.tab {\n  display: none;\n}\n\n.loading-icon {\n  margin-right: 30px;\n}\n\n.card-body {\n  display: flex;\n  align-items: center;\n}\n\n.app-icon {\n  width: 80px;\n  margin-right: 10px;\n}\n\n.oos-upgrade-message {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  background-color: #fff6e5;\n  padding: 5px 10px 5px 10px;\n  border-radius: 5px;\n  border: solid 1px #ffc04c;\n\n}\n\n@media only screen and (max-width: 1050px)  {\n  .tab {\n    display: flex;\n  }\n  .app-menu {\n    display: none;\n  }\n  .app-view {\n    padding: 0;\n  }\n}\n\n@media only screen and (max-width: 774px)  {\n  .app-list-body {\n    justify-content: center;\n  }\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/AppManagerApp.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container app-view\"},[_c('div',{staticClass:\"modal\",class:{active: _vm.onionOs.showModal}},[_c('a',{staticClass:\"modal-overlay\"}),_vm._v(\" \"),_vm._m(0)]),_vm._v(\" \"),_c('ul',{staticClass:\"tab tab-block\"},_vm._l((_vm.tabs),function(tab,tabId){return _c('li',{key:tabId,staticClass:\"tab-item\"},[_c('a',{staticClass:\"c-hand\",class:{active: tabId === _vm.currentTab, badge: tab.badge},attrs:{\"data-badge\":tab.badge},on:{\"click\":function($event){_vm.currentTab = tabId}}},[_vm._v(_vm._s(tab.name))])])})),_vm._v(\" \"),_c('div',{staticClass:\"app-body\"},[_c('ul',{staticClass:\"menu app-menu\"},[_c('li',{staticClass:\"menu-item\"},[_c('div',{staticClass:\"tile tile-centered\"},[_c('div',{staticClass:\"tile-icon\",on:{\"click\":_vm.getApps}},[_c('img',{staticClass:\"avatar\",attrs:{\"src\":\"static/img/icons/store.svg\"}})]),_vm._v(\" \"),_c('div',{staticClass:\"tile-content\"},[_vm._v(\"App Manager\")])])]),_vm._v(\" \"),_c('li',{staticClass:\"divider\"}),_vm._v(\" \"),_vm._l((_vm.tabs),function(tab,tabId){return _c('li',{key:tabId,staticClass:\"menu-item\"},[_c('a',{staticClass:\"c-hand\",class:{active: tabId === _vm.currentTab, badge: tab.badge},attrs:{\"data-badge\":tab.badge},on:{\"click\":function($event){_vm.currentTab = tabId}}},[_vm._v(\"\\n          \"+_vm._s(tab.name)+\"\\n        \")])])})],2),_vm._v(\" \"),_c('div',{staticClass:\"app-content\"},[_c('div',{staticClass:\"card app-list\"},[_c('div',{staticClass:\"card-header\"},[_c('span',{staticClass:\"card-title h5\"},[_vm._v(\"Onion OS Apps \")]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isLoading && _vm.onionOs.installed !== _vm.onionOs.available),expression:\"!isLoading && onionOs.installed !== onionOs.available\"}],staticClass:\"oos-upgrade-message float-right\"},[_vm._v(\"\\n            A new version of OnionOS is available\\n            \"),_c('button',{staticClass:\"btn btn-success float-right\",class:{loading: _vm.isOOSUpdating, disabled: _vm.isInstalling},on:{\"click\":function($event){_vm.updateOnionOs()}}},[_vm._v(\"Update Now\")])]),_vm._v(\" \"),_c('span',{staticClass:\"loading-lg loading-icon float-right\",class:{loading: _vm.isLoading}})]),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.isLoading),expression:\"!isLoading\"}],staticClass:\"card-body app-list-body\"},_vm._l((_vm.availableApps),function(app,idx){return _c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.appShow(app)),expression:\"appShow(app)\"}],key:app.id,staticClass:\"card app-item\"},[_c('div',{staticClass:\"card-body\"},[_c('img',{staticClass:\"app-icon\",attrs:{\"src\":(\"http://repo.onioniot.com/onionos/apps/icons/\" + (app.id) + \".svg\"),\"onerror\":\"this.src = 'static/img/icons/onion.svg'\",\"alt\":\"\"}}),_vm._v(\" \"),_c('div',{staticClass:\"app-description\"},[_c('strong',[_vm._v(_vm._s(app.name))]),_vm._v(\" \"),_c('br'),_vm._v(\"\\n                \"+_vm._s(app.description)),_c('br'),_vm._v(\" \"),_c('i',{staticClass:\"app-version\"},[_vm._v(\"Version \"+_vm._s(_vm.displayAppVersion(app)))])])]),_vm._v(\" \"),_c('div',{staticClass:\"card-footer\"},[(app.installed)?_c('button',{staticClass:\"btn btn-error float-right\",class:{loading: app.installing, disabled: _vm.isInstalling},on:{\"click\":function($event){_vm.removeApp(app, idx)}}},[_vm._v(\"Remove\")]):_vm._e(),_vm._v(\" \"),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(app.installed && (app.version !== app.installedVersion)),expression:\"app.installed && (app.version !== app.installedVersion)\"}],staticClass:\"btn float-right\",class:{loading: app.installing, disabled: _vm.isInstalling},on:{\"click\":function($event){_vm.updateApp(app, idx)}}},[_vm._v(\"Update\")]),_vm._v(\" \"),(!app.installed)?_c('button',{staticClass:\"btn btn-success float-right\",class:{loading: app.installing, disabled: _vm.isInstalling},on:{\"click\":function($event){_vm.installApp(app, idx)}}},[_vm._v(\"Install\")]):_vm._e()])])}))])])])])}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"modal-container\"},[_c('div',{staticClass:\"modal-header\"},[_c('div',{staticClass:\"modal-title h5\"},[_vm._v(\"Update Complete\")])]),_vm._v(\" \"),_c('div',{staticClass:\"modal-body\"},[_c('div',{staticClass:\"content label\",staticStyle:{\"padding\":\"10px\"}},[_vm._v(\"\\n          Your browser will refresh in a few seconds\\n        \")])])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6a1e7d52\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/AppManagerApp.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6a1e7d52\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./AppManagerApp.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./AppManagerApp.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./AppManagerApp.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6a1e7d52\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./AppManagerApp.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6a1e7d52\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/AppManagerApp.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}